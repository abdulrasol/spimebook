{% extends "posts/base.html" %}
{% load posts_extra %}


{% block content %}

<div class="uk-card uk-card-default">
    <div class="uk-card-header me-header">
        {% if user.is_authenticated %}
        <div class="me-context-menu">
            <span type="button" class="uk-icon" uk-icon="icon:more-vertical; ratio:1.2"></span>
        </div>
        <div uk-dropdown="mode: click">
            <ul class="uk-nav uk-dropdown-nav">
                <li><a href="{% url 'edit-book' book.id %}"><span class="uk-margin-small-right"
                            uk-icon="icon: pencil"></span> Edit book Info</a>
                </li>
                {% if readed_book %}
                <li id="add-to-readed-book-parent"><a id="add-to-readed-book"
                        data-book="{% url 'readed-book' book.id %}"><span class="uk-margin-small-right"
                            uk-icon="icon: trash"></span>Remove from readed Books</a>
                </li>
                {% else %}
                <li id="add-to-readed-book-parent"><a id="add-to-readed-book"
                        data-book="{% url 'readed-book' book.id %}"><span class="uk-margin-small-right"
                            uk-icon="icon: plus"></span> Add to
                        readed Books</a>
                </li>
                {% endif %}
                <li class="uk-nav-divider"></li>
                <li><a href="#"><span class="uk-margin-small-right" uk-icon="icon: warning"></span> Report Warning</a>
                </li>
            </ul>
        </div>
        {% endif %}
        <div class="uk-grid-small uk-flex me-text-center-m" uk-grid>
            <div class="uk-width-auto@m book-img">
                <img class="uk-border-rounded" data-src="{{book.book_image.url}}" alt="{{book.title}}" uk-img />
            </div>
            <div class="uk-width-expand uk-margin-small-left">
                <h1 class="uk-margin-remove">{{book.title}}</h1>
                <h2 class="uk-margin-remove-left uk-margin-small"><a
                        href="{% url 'author' book.author.id book.author  %}" class="uk-link-muted">{{book.author}}</a>
                </h2>
                <h4 class="uk-margin-remove-left uk-margin-small">Originally published: {{book.publish_date}}</h4>
            </div>
        </div>

        <div class=" uk-margin-small-top book-genres">
            Genres:
            {% for genre in book.genres.all %}
            <a class="uk-label" href="#">{{ genre }}</a>
            {% endfor %}
        </div>

    </div>
    <div class="uk-card-body">
        <p>
            {{book.book_Bio}}
        </p>
    </div>
    <div class="uk-card-footer">
        <div>
            <ul class="uk-tab-bottom" uk-tab>
                <li class="uk-active"><a href="">All</a></li>
                <li><a href="">Reviews</a></li>
                <li><a href="">Quotes</a></li>
            </ul>
        </div>
        <div class="uk-width-expand">
            <!-- Start Users Posts -->
            {% for post in posts %}
            <div class="uk-card uk-card-primary uk-margin uk-width-1-1">
                <div class="uk-card-header">
                    <div class="uk-grid-small uk-flex-middle" uk-grid>
                        <div class="uk-width-auto">
                            <!-- user profile img -->
                            <a href="{% url 'user-profile' post.user %}">
                                <img class="uk-border-circle" width="50" height="50"
                                    src="{{post.user.profile.picture.url}}" alt="{{post.user.profile.picture.url}}"">
                                <br>
                                <h6 class=" uk-margin-remove uk-width-expand uk-text-center">
                                {{post.user}}
                                </h6>
                            </a>
                        </div>
                        <div class="uk-width-expand">
                            <a href="{% url 'post' post.id %}">
                                <h3 class="uk-card-title uk-margin-remove-bottom">{{post.title}}</h3>
                            </a>
                            <p class="uk-text-meta uk-margin-remove-top"><time
                                    datetime="2016-04-01T19:00">{{post.post_date|date:"D d M Y, H:i"}}</time>
                            </p>
                        </div>
                    </div>
                </div>
                <!-- End header -->
                <div class="uk-card-body uk-padding">
                    {% if post.post_type == "Q" %}
                    <q class="">
                        {{ post.content }}
                    </q>
                    {% else %}
                    <p class="">
                        {{ post.content }}
                    </p>
                    {% endif %}

                </div>
                <!-- End body -->
                <!-- Start footer -->
                <div class="uk-card-footer">
                    {% reaction_bar post.id user %}
                </div>
                <!-- End footer -->
            </div>
            {% endfor %}
            <!-- End Users Posts -->
            <!-- End Post -->
            <!--End Post -->
        </div>
    </div>
</div>
<!-- End book Profile container -->

{% endblock content %}